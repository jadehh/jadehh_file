name: 箱号服务发布

on:
  push:
#    tags:
#      - conta_serviceV*

jobs:
  release:
    name: ${{ matrix.os }} 箱号服务发布
    runs-on:  ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        os: [ "ubuntu-latest" ] #, "macos-latest", "windows-latest"
    steps:
      - name: 下载代码
        uses: actions/checkout@v3
        with:
          repository: jadehh/ContainerOCR
          ref: 箱号服务
          path: code
          token: ${{ secrets.GH_PAT }} # `GH_PAT` is a secret that contains your PAT
      - name: 查看代码
        run: |
          cat code/README.md
      - name: 使用Docker打包编译
        # Echo the `uname` output parameter from the `runcmd` step
        run: |
          docker run -v ${PWD}:/root/jade -d python:3.6.9  bash -c "nohup pip install -r /root/jade/code/requirements.txt >> /root/jade/output.txt 2>&1 "
          cat ${PWD}/output.txt

